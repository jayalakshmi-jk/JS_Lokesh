<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Form Validation</title>
</head>

<body>
    <div class="container">
        <form action="#" id="form" autocomplete="off">
            <h3>Registration Form</h3>
            <div class="formGrp">
                <label for="userName">User Name</label>
                <input type="text" class="userName" id="userName" placeholder="Enter UserName" data-name="UserName">
                <p>Required</p>
            </div>
            <div class="formGrp">
                <label for="Email">Email</label>
                <input type="text" class="Email" id="Email" placeholder="Enter Email" data-name="Email">
                <p>Required</p>
            </div>
            <div class="formGrp">
                <label for="PassWord">Password</label>
                <input type="text" class="PassWord" id="PassWord" placeholder="Enter Password" data-name="Password">
                <p>Required</p>
            </div>
            <div class="formGrp">
                <label for="Retype">Retype Password</label>
                <input type="text" class="Retype" id="Retype" placeholder="Enter Retype Password"
                    data-name="Retype Passwords">
                <p>Required</p>
            </div>
            <button type="submit">Register now</button>
        </form>
    </div>
    <!-- ====================================== javascript ============================================= -->
    <script>


        let form = document.querySelector("form")
        const ep = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        form.addEventListener("submit", ifEmpty)
        let userName = document.getElementById("userName")
        let email = document.getElementById("Email")
        let password = document.getElementById("PassWord")
        let retype = document.getElementById("Retype")

        function ifEmpty() {
            let ip = document.querySelectorAll("input")
            const formGrp = ip.parentElement

            // formGrp.classList.remove("success", "required")

            // console.log(ip)
            ip.forEach(element => {
                let parent = element.parentElement;
                let para = parent.querySelector("p")
                if (element.value == '') {
                    parent.classList.add("required")
                    parent.classList.remove("success")
                } else {
                    parent.classList.add("success")
                    parent.classList.remove("required")
                }

                if (element.classList.contains("Email") && element.value !== "" && !ep.test(element.value)) {
                    parent.classList.remove("success")
                    parent.classList.add("required")
                    para.innerHTML = 'Please enter a valid email address.';
                }

                if(element.classList.contains("Retype") && element.value !== ""){
                    if(password.value !== retype.value){
                         parent.classList.remove("success")
                    parent.classList.add("required")
                    para.innerHTML = 'Does not match the password!!!';
                    }
                }
            })
        }
    </script>

</body>

</html>